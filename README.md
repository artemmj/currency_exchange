## currency_exchange - приложение для работы с курсом валют.

____

  Проект представляет из себя REST API, написанное на Python3 + Django.
  
  В первую очередь, приложение позволяет создавать пользователей системы обмена валютами: указываем свою почту и желаемую валюту, при наличии - вносим сумму. Далее: система позволяет осуществлять точные переводы между пользователями/их счетами, используя самую свежую информацию о текущих курсах валют. Внутри располагается хранилище курсов поддерживаемых валют, система автоматически собирает все самые свежие данные о курсе (можно, например, собрать аналитику).

  ## На текущий момент поддерживаются следующие валюты: EUR, USD, GPB, RUB, BTC.

  Система испольует надежную JWT-аутентификацию, хранит историю переводов, позволяет просмотреть ее просто используя полученный JWT-токен.
  
  Структура проекта:
  
  - authentication - апп аутентификации и всего, что связанно с пользователем. Определяет соответствующие методы регистрации, авторизации, и верификации.
  
  - core - ядро АПИ. Хранит в себе сущности курсов валют, историй переводов, опрделяет логику работы переводов, актуализации данных связанных с курсом.

____

### Запуск проекта локально, классически

1. Установите виртуальное окружение (можно использовать какое угодно, venv для примера)
> python3 -m venv env

2. Клонируйте репозиторий
> git clone https://github.com/anonymError/currency_exchange.git

> cd currency_exchange

3. Активируйте виртуальную среду
> source ../env/bin/activate

4. Установите необходимые зависимости
> pip3 install -r requirements.txt

5. Мигрируйте БД
> python3 manage.py migrate

6. Запустите локальный сервер разработки :)
> python3 manage.py runserver


В файле настроек settings.py можно найти закомментированный блок с проектными настройками для PostgreSQL и SQLite. В соответствующие поля следует вписать параметры настроек Вашей системы, в т.ч. название базы данных (если запускаете не в Докере).

___

### Запуск проекта в Docker

Пункты 1 и 2 не отличаются.

3. Выполните сборку
> docker build .

4. Мигрируйте вашу БД и создайте суперпользователя (если хотите)
> sudo docker-compose run web python3 /code/manage.py migrate

> sudo docker-compose run web python3 /code/manage.py createsuperuser

5. Наконец, поднимите контейнер
> docker-compose up -d --build

Готово, система готова к работе!

___

## API Documentation

### Create

/auth/create/ - создать нового пользователя. Ожидаются параметры: email, password, currency, balance. Возвращается информация о новосозданном пользователе и JWT токен.

Пример:
![create](https://github.com/anonymError/currency_exchange/raw/master/_images_for_git/create.png)

### Log in

/auth/login/ - авторизоваться, получить токен. Ожидаются параметры: email и password. В ответ получаем JWT токен.

Пример:
![login](https://github.com/anonymError/currency_exchange/raw/master/_images_for_git/login.png)

### Transfer

/api/transfer/ - эндпоинт перевода. Для доступа требует JWT-токен, по нему же определяет, кто отправитель. В параметрах ожидается target_id (id пользователя получателя) и sum_transaction (сумма перевода, в валюте отправителя). В случае успешного перевода денег - возвращается статут 200 ОК.

Пример:
![transfer](https://github.com/anonymError/currency_exchange/raw/master/_images_for_git/transate.png)

### History

/api/history/ - эндпоинт истории переводов. Ожидает лишь JWT токен в заголовке, по которому определит пользователя и выведет историю его переводов.

Пример:
![history](https://github.com/anonymError/currency_exchange/raw/master/_images_for_git/history.png)
